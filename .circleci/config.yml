version: 2

jobs:
  build:
    docker:
      - image: circleci/node:10
      - image: circleci/postgres:9.6.2-alpine
      - image: circleci/mongo:4.1.9
    steps:
      - run:
          name: Wait for postgres
          # preinstalled in circleci/* docker image
          command: dockerize -wait tcp://127.0.0.1:5432 -timeout 120s
      - run:
          name: Wait for postgres
          # preinstalled in circleci/* docker image
          command: dockerize -wait tcp://127.0.0.1:27017 -timeout 120s
      - run: echo "i used 2 datanbses!"